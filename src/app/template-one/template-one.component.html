<div class="page-wrapper">
  <!-- BEGIN PAGE HEADER -->
  <div class="page-header d-print-none">
    <div class="px-5">
      <div class="row g-2 align-items-center">
        <div class="col">
          <h2 class="page-title">Template 1</h2>
        </div>
      </div>
    </div>
  </div>
  <!-- END PAGE HEADER -->
  <!-- BEGIN PAGE BODY -->
  <div class="page-body">
    <div class="px-5">
      <div class="card">
        <div class="row g-0">
          <div class="col-12 col-md-3 border-end">
            <div class="card-body sidebar roundbord dark [&.dark]:bg-coal-600 ">
              <aside class="" id="sidebar" style="min-height: 100vh;">

                <!-- [class.collapsed]="true" -->
                <div class="sidebar-header hidden lg:flex items-center relative justify-between px-3 lg:px-6 shrink-0"
                  id="sidebar_header">

                  <a class="hidden dark:block" href="/metronic/tailwind/demo1/">
                    <img class="default-logo min-h-[22px] max-w-none" style="height: 100px;width: 230px;"
                      src="../assets/img/logo2.png">
                  </a>

                </div>
                <div class="sidebar-content flex grow shrink-0 py-5 pe-2" id="sidebar_content">
                  <div class=" grow shrink-0 flex ps-2 lg:ps-5 pe-1 lg:pe-3" id="sidebar_scrollable">
                    <!-- Sidebar Menu -->
                    <div class="menu flex flex-col grow gap-0.5">
                      <div class="menu-item" *ngFor="let item of sidebarItems">
                        <ng-container *ngIf="getFirstKey(item) as key">

                          <!-- Header with submenu -->
                          <div *ngIf="hasSubmenu(item)">
                            <div class="menu-link d-flex justify-content-between {{cssProperty.menuDiv}}"
                              (click)="!isCollapsed(item)? toggleCollapse(item) : ''">
                              <span class="menu-icon w-[20px]">
                                <i class="ki-filled ki-element-11 text-lg fn18"></i>
                              </span>
                              <span class="menu-title {{cssProperty.menuTit}}">
                                {{ key }}
                              </span>
                              <div><i *ngIf="!isCollapsed(item)" class="ti ti-arrow-badge-down text-white fs-2"></i>
                                <i *ngIf="isCollapsed(item)" class="ti ti-arrow-badge-up text-white fs-2"></i>
                              </div>
                            </div>

                            <!-- Submenus draggable only if expanded -->
                            <div class="submenu ps-4 mt-2" *ngIf="isCollapsed(item)">
                              <div class="sub-item menu-link d-flex justify-content-between {{cssProperty.menuDiv}}"
                                *ngFor="let subKey of getSubItems(item)"
                                (dndMoved)="onDraggableMoved(getSubItemData(item, subKey))"
                                [dndDraggable]="getSubItemData(item, subKey)" [dndEffectAllowed]="'copyMove'"
                                (click)="!isCollapsed(item)? toggleCollapse(item) : ''">
                                <span class="menu-icon w-[20px]">
                                  <i class="ki-filled ki-element-11 text-lg fn18"></i>
                                </span>
                                <span class="menu-title {{cssProperty.menuTit}}">
                                  {{ subKey }}
                                </span>
                              </div>
                            </div>
                          </div>

                          <!-- No submenu, drag main -->
                          <div *ngIf="!hasSubmenu(item)" class="menu-link {{cssProperty.menuDiv}}"
                            (dndMoved)="onDraggableMoved(item)" [dndDraggable]="item"
                            [dndEffectAllowed]="'copyMove'">
                            <span class="menu-icon w-[20px]">
                              <i class="ki-filled ki-element-11 text-lg fn18"></i>
                            </span>
                            <span class="menu-title {{cssProperty.menuTit}}">
                              {{ key }}
                            </span>
                          </div>

                        </ng-container>
                      </div>
                    </div>


                    <!-- End of Sidebar Menu -->
                  </div>
                </div>

              </aside>
            </div>
          </div>
          <div class="col-12 col-md-9 d-flex flex-column">
            <div class="card-body">
              <h3 class="card-title">Edit Template</h3>
            </div>
            <div style="width: 65vw;height: 100vh; ">


              <div (dndDrop)="onDropItem($event)"
                style="width: 100%; height: 100vh;"
                (dndMoved)="onDraggableMoved($event)"  [dndEffectAllowed]="'copyMove'"
                 dndDropzone>
                <div [innerHTML]="renderHtml(item)" data-bs-toggle="offcanvas" href="#offcanvasEnd" role="button" aria-controls="offcanvasEnd" (click)="editSection(item)" *ngFor="let item of design;let i= index "></div>

              </div>
            </div>

          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- END PAGE BODY -->
  <!--  BEGIN FOOTER  -->

  <!--  END FOOTER  -->
</div>


<div class="offcanvas offcanvas-end " tabindex="-1" id="offcanvasEnd" aria-labelledby="offcanvasEndLabel" aria-modal="true" role="dialog">
  <div class="offcanvas-header">
    <h2 class="offcanvas-title" id="offcanvasEndLabel">End offcanvas</h2>
    <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
  </div>
  <div class="offcanvas-body">

    

    <div class="mt-3">
      <button class="btn btn-primary" type="button" data-bs-dismiss="offcanvas">Save Style</button>
    </div>
  </div>
</div>
